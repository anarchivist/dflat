<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head>
<title>Repository Working Group: Directory Description with Namaste Tags</title>
<meta http-equiv="Expires" content="Wed, 15 Apr 2009 18:39:12 +0000">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Directory Description with Namaste Tags">
<meta name="generator" content="xml2rfc v1.32 (http://xml.resource.org/)">
<style type="text/css"><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head><body>
<table summary="layout" border="0" cellpadding="0" cellspacing="0" width="66%"><tbody><tr><td><table summary="layout" border="0" cellpadding="2" cellspacing="1" width="100%">
<tbody><tr><td class="header">Repository Working Group</td><td class="header">J. Kunze</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">California Digital Library</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">April 14, 2009</td></tr>
</tbody></table></td></tr></tbody></table>
<h1><br>Directory Description with Namaste Tags</h1>

<h3>Abstract</h3>

<p>
Namaste (NAMe AS TExt) is a file naming convention to support primitive
directory-level metadata tags exposed directly via filenames.  As such,
Namaste tags greet visitors who request a directory listing (e.g., Linux
'ls') with a glimpse of what the directory holds.  An important use is
to declare a directory's "type", somewhat like a file's "magic number".
A Namaste tag,
<em>D</em>=<em>tvalue</em>,
is usually a tag value preceded by a single-digit name, designed so that
ordinary directory listings will tend to display tags, if present, in a
block near the top.  Tag names (digits) are currently reserved for
directory type (0) and the four DC Kernel elements (1-4).  Restrictions
on filename characters and lengths may result in a tag value that is a
lossy representation of the complete metadata value, assumed to be the
content of tag file.


</p>
<a name="anchor1"></a><br><hr>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Namaste tag basics</h3>

<p>
A Namaste ("name as text") tag is a metadata element that represents an
element name and value directly in the name of a file.  The typical form
of the filename is designed so that elements should appear as a group
near the top of a typical directory listing (e.g., using Linux 'ls').
There they greet the visitor, serving as labels that are quickly
noticeable to users and easy to find with software.  Here's a sample
directory listing, the first entry of which is a Namaste tag declaring
this directory's "type" to be "BagIt Version 0.96".

</p>
<div style="display: table; width: 0pt; margin-left: 3em; margin-right: auto;"><pre>0=bagit_0.96     bag-info.txt      fetch.txt
bagit.txt        data/             manifest-md5.txt
</pre></div><p>


</p>
<p>
This specification defines Namaste tags but leaves it up to applications
to define conditions under which their use is required.  For example, a
tool that reads "widget 1.3" directories could reqire the presence of a
"0=widget_1.3" file.  A tag's form, as a filename, is

</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
<em>D=tvalue</em>

</dd>
</dl></blockquote><p>

where <em>D</em> is usually a single decimal digit
representing the tag name and <em>tvalue</em> is a
string representing the tag value.  What's inside the tag file named
"<em>D=tvalue</em>" is the full value string from
which <em>tvalue</em> is derived.  For example, on a
Linux system,

</p>
<div style="display: table; width: 0pt; margin-left: 3em; margin-right: auto;"><pre>% cat 0=widget_1.3
widget 1.3
</pre></div><p>


In general, <em>tvalue</em> is the result of a
transformation that may remap filesystem-unsafe characters and shorten
the full value string.  Here's another example illustrating one approach
to this transformation.

</p>
<div style="display: table; width: 0pt; margin-left: 3em; margin-right: auto;"><pre>% ls
0=dflat_1.8      admin/            splash.txt        v005/
1=Twain,_Mark    annotations/      v001/             v006/
2=Huckleberry..  data/             v002/             v007/
3=1898           enrichment/       v003/             v008/
4=12345678901..  manifest.txt      v004/
% cat ?=*
dflat 1.8
Twain, Mark
Huckleberry Finn
1898
12345678901123456
</pre></div><p>


The purpose of Namaste tags is to help a human being get a glimpse of
what the containing directory is about.  Should it be needed, a tag
file's content provides a complete element value without further parsing.
There is no other machine-readability requirement.

</p>
<a name="anchor2"></a><br><hr>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Basic and extended tag names</h3>

<p> 
The basic Namaste tag name is a single-digit.
The tag name that specifies the directory type is 0, and
tag names 1-4 correspond to Dublin Core (DC)
<a class="info" href="#RFC5013">[RFC5013]<span> (</span><span class="info">Kunze, J. and T. Baker, “The Dublin Core Metadata Element Set,” August&nbsp;2007.</span><span>)</span></a>Kernel Metadata <a class="info" href="#Kernel">[Kernel]<span> (</span><span class="info">Kunze, J. and A. Turner, “Kernel Metadata and Electronic Resource Citations (ERCs),” October&nbsp;2007.</span><span>)</span></a>
elements h1-h4.  The currently defined tag names are summarized below.

</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
<tt>0=</tt><em>type</em>
&nbsp;—&nbsp; directory type string ("magic number")

</dd>
<dt></dt>
<dd>
<tt>1=</tt><em>who</em>
&nbsp;—&nbsp; who created, published, or contributed to it

</dd>
<dt></dt>
<dd>
<tt>2=</tt><em>what</em>
&nbsp;—&nbsp; what the expression was called (DC Title)

</dd>
<dt></dt>
<dd>
<tt>3=</tt><em>when</em>
&nbsp;—&nbsp; when it was expressed (DC Date)

</dd>
<dt></dt>
<dd>
<tt>4=</tt><em>where</em>
&nbsp;—&nbsp; where to find the expression (DC Identifier)

</dd>
</dl></blockquote><p>

These tag names were conceived with default sorting order in mind so that
directory listings would tend to display tags, if present, in a block
near the top.  Note that sorting is typically locale-sensitive, sometimes
with unexpected results when a directory contains other filenames that
begin with digits.

</p>
<p>
An <em>extended</em> Namaste tag name is an arbitrary
multi-character string of letters, digits, and underscores ('_') that
starts with a letter, underscore, or period ('.').  Extended tag names
will tend not to have the same display and grouping features as
single-digit tag names.

</p>
<p> 
This specification does not currently define any extended names.
Applications that wish to define names that won't conflict with future
defined Namaste tag names should begin theirs with "x_".

</p>
<p> 
Namaste tags have no formal relationship to filesystem-supported
metadata schemes, such as XFS extended attributes.

</p>
<a name="anchor3"></a><br><hr>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Transforming metadata values into tag values</h3>

<p>
As mentioned, the tag value, <em>tvalue</em>
within the name "<em>D=tvalue</em>",
is in general the result of a transformation of the full value string
found inside the tag file.  That transformation,
<em>Tr</em>, may remap filesystem-unsafe characters
and shorten the full value string, <em>fvalue</em>,
in creating <em>tvalue</em>.

</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
<em>Tr(ContentOfFileNamed("D=tvalue")) = Tr(fvalue) = tvalue</em>

</dd>
</dl></blockquote><p>

</p>
<p>
The transformation process can be very flexible as it is entirely for the
benefit of human users.  An application that creates Namaste tags is thus
free to transform values differently depending on the element and the
audience.  For example, it might deem element 4 ("where") to be too
valuable ever to truncate, regardless of the consequences for display.
As with any tranformation, some <em>fvalue</em>s may
produce no change (i.e., <em>tvalue</em> is the same
as <em>fvalue</em>); this was the case for the tag
<tt>3=1898</tt> in the previous example.

</p>
<p>
Two common aspects of transformation are character re-mapping and string
shortening.  Re-mapping is necessary to avoid characters in
<em>tvalue</em> that would be illegal in a filename,
such as '/'.  Re-mapping some legal characters may make it easier to
manipulate files (e.g., changing spaces to underscores).
If platform independence is desired in contemporary
filesystems (Unix and Windows), the following characters found in
<em>fvalue</em> should be avoided:

</p>
<div style="display: table; width: 0pt; margin-left: 3em; margin-right: auto;"><pre>    " * / : &lt; &gt; ? \ |
</pre></div><p>


Shortening strings may be necessary for convenient display of a
multi-column directory listing.  For long strings, shortening may also be
necessary because of maximum filename length restrictions (e.g., 255
characters in Windows).  Shortening may occur anywhere that it is most
appropriate.  A common technique is to substitute the least significant
characters with an ellipsis (".." or "...") to indicate missing
characters.  Applications may choose to truncate at the right, left, or
middle of a string, and vary truncation length depending on the element.


</p>
<a name="anchor4"></a><br><hr>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Namaste directory types</h3>

<p>
This specification defines an extendable register of directory types
in <a class="info" href="#dtypes">Table&nbsp;1<span> (</span><span class="info">Namaste Directory Types</span><span>)</span></a>.  Within this register,
<tt>N.M</tt>
refers to major and minor specification version numbers.

<br></p><hr class="insert">
<a name="dtypes"></a>

<p style="text-align: center;">
</p><table class="all" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tbody><tr><th align="left">&nbsp;Directory Type&nbsp;</th><th align="left">&nbsp;Reference&nbsp;</th></tr>
<tr>
<td align="left">&nbsp;<tt>0=bagit_N.M</tt></td>
<td align="left">&nbsp;<a class="info" href="#BAGIT">[BAGIT]<span> (</span><span class="info">Boyko, A., Kunze, J., Littman, J., Madden, L., and B. Vargas, “BagIt File Package Format,” November&nbsp;2008.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">&nbsp;<tt>0=can_N.M</tt></td>
<td align="left">&nbsp;<a class="info" href="#CAN">[CAN]<span> (</span><span class="info">, “Content Access Node (CAN),” April&nbsp;2009.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">&nbsp;<tt>0=dflat_N.M</tt></td>
<td align="left">&nbsp;<a class="info" href="#DFLAT">[DFLAT]<span> (</span><span class="info">, “Dflat: Simple File-Based Object Storage,” April&nbsp;2009.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">&nbsp;<tt>0=pairtree_N.M</tt></td>
<td align="left">&nbsp;<a class="info" href="#PAIRTREE">[PAIRTREE]<span> (</span><span class="info">Kunze, J., Haye, M., Hetzner, E., Reyes, M., and C. Snavely, “Pairtrees for Collection Storage,” December&nbsp;2008.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">&nbsp;<tt>0=redd_N.M</tt></td>
<td align="left">&nbsp;<a class="info" href="#REDD">[REDD]<span> (</span><span class="info">, “Reverse Directory Deltas (ReDD),” March&nbsp;2009.</span><span>)</span></a></td>
</tr>
</tbody></table>

<p style="text-align: center;">
</p><table align="center" border="0" cellpadding="0" cellspacing="2"><tbody><tr><td align="center"><font size="1" face="monaco, MS Sans Serif"><b>&nbsp;Table 1: Namaste Directory Types&nbsp;</b></font><br></td></tr></tbody></table><hr class="insert">



<p>
Additional types will be defined and may be submitted by sending email
to the author.  Submissions should conform to these guidelines to reduce
the need for lossy transformation when creating the
<em>tvalue</em>:  proposed strings
(<em>fvalue</em>s) should not exceed 16 characters in
length and should contain only letters, digits, underscores, periods, and
hyphens.

</p>
<p>

</p>
<a name="anchor5"></a><br><hr>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Tag file content</h3>

<p>
Once a directory has been read, its Namaste tags, as filenames, are
available without an extra disk read.  While this provides efficient
access, the filename metadata in
<em>tvalue</em>
is often lossy.  To mitigate this situation, the tag file's content,
<em>fvalue</em>,
should be a lossless, newline-terminated, plain text representation,
using UTF-8 <a class="info" href="#RFC3629">[RFC3629]<span> (</span><span class="info">Yergeau, F., “UTF-8, a transformation format of ISO 10646,” November&nbsp;2003.</span><span>)</span></a>, of
<em>tvalue</em>.

</p>
<p>
The terminal newline (hex 0a) is for convenient editing and display of
a metadata value in line-oriented systems such as Unix, and should be
trimmed by applications that require a strict sense of the
<em>fvalue</em>.

</p>
<a name="rfc.references1"></a><br><hr>
<h3>6.&nbsp;References</h3>
<table border="0" width="99%">
<tbody><tr><td class="author-text" valign="top"><a name="BAGIT">[BAGIT]</a></td>
<td class="author-text">Boyko, A., Kunze, J., Littman, J., Madden, L., and B. Vargas, “<a href="http://www.cdlib.org/inside/diglib/bagit/bagitspec.html">BagIt File Package Format</a>,” November&nbsp;2008 (<a href="http://www.cdlib.org/inside/diglib/bagit/bagitspec.html">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="CAN">[CAN]</a></td>
<td class="author-text">“<a href="http://www.cdlib.org/inside/diglib/can/canspec.pdf">Content Access Node (CAN)</a>,” April&nbsp;2009 (<a href="http://www.cdlib.org/inside/diglib/can/canspec.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="DFLAT">[DFLAT]</a></td>
<td class="author-text">“<a href="http://cdlib-s10.cdlib.org/inside/diglib/dflat/dflat.pdf">Dflat: Simple File-Based Object Storage</a>,” April&nbsp;2009 (<a href="http://cdlib-s10.cdlib.org/inside/diglib/dflat/dflat.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Kernel">[Kernel]</a></td>
<td class="author-text">Kunze, J. and A. Turner, “<a href="http://www.cdlib.org/inside/diglib/ark/ercspec.html">Kernel Metadata and Electronic Resource Citations (ERCs)</a>,” October&nbsp;2007 (<a href="http://www.cdlib.org/inside/diglib/ark/ercspec.html">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="PAIRTREE">[PAIRTREE]</a></td>
<td class="author-text">Kunze, J., Haye, M., Hetzner, E., Reyes, M., and C. Snavely, “<a href="http://www.cdlib.org/inside/diglib/pairtree/pairtreespec.html">Pairtrees for Collection Storage</a>,” December&nbsp;2008 (<a href="http://www.cdlib.org/inside/diglib/pairtree/pairtreespec.html">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="REDD">[REDD]</a></td>
<td class="author-text">“<a href="http://www.cdlib.org/inside/diglib/redd/reddspec.html">Reverse Directory Deltas (ReDD)</a>,” March&nbsp;2009 (<a href="http://www.cdlib.org/inside/diglib/redd/reddspec.html">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text">Yergeau, F., “<a href="ftp://ftp.isi.edu/in-notes/rfc3629.txt">UTF-8, a transformation format of ISO 10646</a>,” STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5013">[RFC5013]</a></td>
<td class="author-text">Kunze, J. and T. Baker, “<a href="ftp://ftp.isi.edu/in-notes/rfc5013.txt">The Dublin Core Metadata Element Set</a>,” RFC&nbsp;5013, August&nbsp;2007.</td></tr>
</tbody></table>

<a name="rfc.authors"></a><br><hr>
<h3>Author's Address</h3>
<table border="0" cellpadding="0" cellspacing="0" width="99%">
<tbody><tr><td class="author-text">&nbsp;</td>
<td class="author-text">John A. Kunze</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">California Digital Library</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">415 20th St, 4th Floor</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oakland, CA  94612</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+1 510-893-5212</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jak@ucop.edu">jak@ucop.edu</a></td></tr>
</tbody></table>
</body></html>